@page "/grid/databind"

@using TelerikBlazor.Shared
@inject HttpClient Http

<TelerikGrid Data=@GridData
           Height=@Height
           Sortable=@Sortable
           Pageable=@Pageable PageSize=@PageSize Page=1>
    <TelerikGridColumns>
        <TelerikGridColumn Field=@nameof(Product.ProductId) Title="Id" />
        <TelerikGridColumn Field=@nameof(Product.ProductName) Title="Product Name" />
        <TelerikGridColumn Field=@nameof(Product.UnitPrice) Title="Unit Price">
            <Template>
                @(String.Format("{0:C2}", (context as Product).UnitPrice))
            </Template>
        </TelerikGridColumn>
    </TelerikGridColumns>
</TelerikGrid>

@functions {
    public IEnumerable<Product> GridData { get; set; }
    int PageSize = 10;
    bool Pageable = false;
    bool Sortable = false;
    decimal Height = 400;

    protected override async Task OnInitAsync()
    {
        await LoadData();
    }

    private async Task LoadData()
    {
        GridData = await Http.GetJsonAsync<Product[]>("api/NorthwindData/Products");
    }
}
